var msf=function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,s=n(1);s.version="{{version}}",i=function(){return s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)),t.exports=s},function(t,e,n){"use strict";var i=n(5),s=(n(2),n(3)),r=n(4),o=null;t.exports.logger=i.logger,t.exports.search=function(t){return o||(o=new r),t&&(o.once("found",function(e){t(null,e)}),setTimeout(function(){o.start()},0)),o},t.exports.local=function(t){s.getLocal(t)},t.exports.remote=function(t,e){s.getByURI(t,e)}},function(t){"use strict";function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._disabledEvents={},e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,i,o,c,a,u;if(this._events||(this._events={}),this._disabledEvents[t])return!1;if("error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],r(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,c=new Array(o-1),a=1;o>a;a++)c[a-1]=arguments[a];i.apply(this,c)}else if(s(i)){for(o=arguments.length,c=new Array(o-1),a=1;o>a;a++)c[a-1]=arguments[a];for(u=i.slice(),o=u.length,a=0;o>a;a++){var l=u[a].apply(this,c);if("stopEvent"===l)break}}return!0},e.prototype.addListener=function(t,i){var o;if(!n(i))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(i.listener)?i.listener:i),this._events[t]?s(this._events[t])?this._events[t].push(i):this._events[t]=[this._events[t],i]:this._events[t]=i,s(this._events[t])&&!this._events[t].warned){var o;o=r(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=function(){e.prototype.addListener.apply(this,arguments)},e.prototype.once=function(t,e){function i(){this.removeListener(t,i),s||(s=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var s=!1;return i.listener=e,this.on(t,i),this},e.prototype.removeListener=function(t,e){var i,r,o,c;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],o=i.length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(i)){for(c=o;c-->0;)if(i[c]===e||i[c].listener&&i[c].listener===e){r=c;break}if(0>r)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.off=function(){e.prototype.removeListener.apply(this,arguments)},e.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.disableEvent=function(t){t&&"string"==typeof t&&(this._disabledEvents[t]=!0)},e.prototype.enableEvent=function(t){t&&"string"==typeof t&&delete this._disabledEvents[t]},e.listenerCount=function(t,e){var i;return i=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},function(t,e,n){"use strict";function i(t){this.id=t.id,this.name=t.name,this.version=t.version,this.type=t.type,this.uri=t.uri,this.device=t.device,r.readOnly(this,["id","name","version","type","uri","device"])}var s=n(5),r=s.props,o=n(6),c=n(7);i.prototype.application=function(t,e){return new o(this,t,e)},i.prototype.channel=function(t){return new c(this,t)},i.getLocal=function(t){i.getByURI("http://127.0.0.1:8001/api/v2/",t)},i.getByURI=function(t,e){var n=new XMLHttpRequest;n.timeout=5e3,n.ontimeout=function(){e()},n.onload=function(){if(200===this.status)try{var t=JSON.parse(this.responseText);e(null,new i(t))}catch(n){e(n)}else e()},n.open("get",t,!0),n.send()},t.exports=i},function(t,e,n){"use strict";function i(){i.super_.call(this),this.discoveryFrame=null,this.status=i.STATUS_STOPPED;var t=this,e=document.createElement("iframe");e.setAttribute("width","1"),e.setAttribute("height","1"),e.style.display="none",e.src="http://multiscreen.samsung.com/discoveryservice/v2/discover",document.body.appendChild(e),this.windowMessageListener=function(s){if(s.source===e.contentWindow)if(s.data&&"discovery.ready"===s.data.event)t.discoveryFrame=s.source,t.onSearchReady();else if(s.data&&"discovery.result"===s.data.event){for(var r=[],o=n(3),c=0;c<s.data.result.length;c++)r.push(new o(s.data.result[c]));t.onSearchResult(r)}else s.data&&"discovery.error"===s.data.event&&(t.onSearchError(s.data.error),this.status=i.STATUS_STOPPED)},window.addEventListener("message",this.windowMessageListener),r["private"](this,["discoveryFrame","windowMessageListener"])}var s=n(5),r=s.props,o=n(2);s.inherits(i,o),i.STATUS_STOPPED="stopped",i.STATUS_STARTED="started",i.prototype.start=function(){if(this.status===i.STATUS_STOPPED){if(this.discoveryFrame)this.discoveryFrame.postMessage({method:"discovery.search"},"*");else{var t=this;this.once("ready",function(){t.discoveryFrame.postMessage({method:"discovery.search"},"*")})}this.onSearchStart()}else console.warn("a previous search is already in progress")},i.prototype.stop=function(){this.onSearchStop()},i.prototype.onSearchReady=function(){this.emit("ready")},i.prototype.onSearchResult=function(t){this.status!==i.STATUS_STOPPED&&this.emit("found",t),this.status=i.STATUS_STOPPED},i.prototype.onSearchError=function(t){this.emit("error",t),this.status=i.STATUS_STOPPED},i.prototype.onSearchStart=function(){this.status=i.STATUS_STARTED,this.emit("start",this)},i.prototype.onSearchStop=function(){this.status=i.STATUS_STOPPED,this.emit("stop",this)},t.exports=i},function(t,e,n){t.exports={logger:n(8),url:n(9),inherits:n(10),props:n(11),types:n(12),queryString:n(13)}},function(t,e,n){"use strict";function i(t,e,n){if(!o.isObject(t))throw new TypeError("service must be of type Service");if(!o.isString(e))throw new TypeError("id must be a valid string");if(!o.isString(n))throw new TypeError("channelId must be a valid string");this.type=e.match(/(file:\/\/|http(s)?:\/\/)/gim)?l:u,i.super_.call(this,t,n),this.id=e,this.service=t,this.on("clientDisconnect",function(t){t.isHost&&this.disconnect()}.bind(this)),this.disableEvent("connect"),c.readOnly(this,"id"),c["private"](this,"type","service")}var s=n(5),r=s.logger,o=s.types,c=s.props,a=n(7),u="applications",l="webapplication";s.inherits(i,a),i.prototype.connect=function(t,e){if(!o.isObject(t))throw new TypeError("attributes must be a valid object");if(!o.isFunction(e))throw new TypeError("callback must be a valid function");this.start(function(n){return n?e(n):void a.prototype.connect.call(this,t,function(t,n){if(t)return e(t);this.connected=!1;var i=function(){this.connected=!0,e&&(r.debug("application.connect->callback",null,n),e(null,n)),r.debug('application.emit("connect")',n),this.enableEvent("connect"),this.emit("connect",n),this.disableEvent("connect")}.bind(this);this.once("ready",i)}.bind(this))}.bind(this))},i.prototype.disconnect=function(t,e){if(o.isFunction(t)&&(e=t,t=!0),o.isUndefined(t)&&(t=!0),t&&this.clients.length<=2){var n=function(){a.prototype.disconnect.call(this,e)}.bind(this);"webapplication"===this.type?this.invoke("ms.webapplication.stop",{url:this.id},n):this.invoke("ms.application.stop",{id:this.id},n)}else a.prototype.disconnect.call(this,e)},i.prototype.install=function(t){if(this.type===l)return t(new Error("web application cannot be installed"));var e,n=new XMLHttpRequest;n.timeout=1e4,n.ontimeout=function(){e=new Error("Request Timeout"),e.code=408,t(e)},n.onload=function(){200===this.status?t(null,!0):(e=new Error(this.statusText),e.code=this.status,t(e))},n.open("get",this.service.uri+"applications/"+this.id,!0),n.send()},i.prototype.start=function(t){var e,n=new XMLHttpRequest;n.timeout=1e4,n.ontimeout=function(){e=new Error("Request Timeout"),e.code=408,t(e)},n.onload=function(){200===this.status?t(null,!0):(e=new Error(this.statusText),e.code=this.status,t(e))},this.type===l?(n.open("post",this.service.uri+"webapplication/",!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({url:this.id}))):(n.open("post",this.service.uri+"applications/"+this.id,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({})))},t.exports=i},function(t,e,n){"use strict";function i(t,e){if(r.debug("new Channel",arguments),!o.isObject(t))throw new TypeError("service must be of type Service");if(!o.isString(e))throw new TypeError("uri must be a valid string");i.super_.call(this);var n=this,a=s.url.parse(t.uri);this.connected=!1,this.clientId=null,this.connection=null,this.resultHandlers={},this.connectionUrl="ws://"+a.host+a.pathname+"channels/"+e,this.pingTimeout=null,this.pingInterval=null,this.clients=new l(this),Object.defineProperty(this,"isConnected",{get:function(){return n.connected}}),Object.defineProperty(this,"connectionTimeout",{set:function(t){r.debug("updating connection timeout ",t),n.pingTimeout=t>0?t:0,this.isConnected&&n.startHealthCheck()},get:function(){return n.pingTimeout}}),this.on("connect",this.startHealthCheck),this.on("disconnect",this.stopHealthCheck),c.readOnly(this,["clients"]),c["private"](this,["connected","clientId","connection","resultHandlers","connectionUrl","connectCallback","pingInterval","pingTimeout","lastPingReceived"])}var s=n(5),r=s.logger,o=s.types,c=s.props,a=n(2),u=n(14),l=n(15),h="__ping";s.inherits(i,a),i.prototype.connect=function(t,e){if(r.debug("channel.connect",arguments),this.isConnected)return console.warn("Channel is already connected.");if(o.isFunction(t)&&!e?(e=t,t={}):t=t||{},!o.isObject(t))throw new TypeError("attributes must be a valid object");if(e&&!o.isFunction(e))throw new TypeError("callback must be a valid function");this.connectCallback=e;var n=this.connectionUrl+"?"+s.queryString.stringify(t);this.connection&&(this.connection.onopen=null,this.connection.onerror=null,this.connection.onclose=null,this.connection.onmessage=null),this.connection=new WebSocket(n),this.connection.binaryType="arraybuffer",this.connection.onopen=this._onSocketOpen.bind(this),this.connection.onerror=this._onSocketError.bind(this),this.connection.onclose=this._onSocketClose.bind(this),this.connection.onmessage=this._onSocketMessage.bind(this)},i.prototype.disconnect=function(t){r.debug("channel.disconnect",arguments),this.isConnected||console.warn("channel is already disconnected"),this.connection.close();var e=this;setTimeout(function(){t&&t(null,e)},0)},i.prototype.publish=function(t,e,n,i){if(r.silly("channel.publish",arguments),!this.isConnected)return console.warn("Channel is not connected.");if(n=n||"broadcast",e=e||null,!o.isString(t))throw new TypeError("event must be a valid string");if(!o.isString(n)&&!o.isArray(n))throw new TypeError("targets must be a valid string or array");this.invoke("ms.channel.emit",{event:t,data:e,to:n},null,!0,i)},i.packMessage=function(t,e){r.debug("channel.packMessage",arguments);var n=JSON.stringify(t),i=new Blob([n]).size,s=new ArrayBuffer(2),o=new DataView(s);return o.setUint16(0,i),new Blob([s,n,e])},i.unpackMessage=function(t){r.debug("channel.unpackMessage",arguments);for(var e="",n=new DataView(t),i=n.getUint16(0),s=0;i>s;s++)e+=String.fromCharCode(n.getUint8(s+2));var o=t.slice(2+i),c=JSON.parse(e);return{payload:o,message:c}},i.prototype.invoke=function(t,e,n,s,c){if(r.debug("channel.invoke",arguments),!o.isString(t))throw new TypeError("method must be a valid string");e=e||{};var a={method:t,params:e};n&&!s&&(a.id=Date.now(),this.resultHandlers[a.id]=n),a=c?i.packMessage(a,c):JSON.stringify(a),this.connection.send(a)},i.prototype._onConnect=function(t){r.silly("channel._onConnect"),this.connected=!0,this.clientId=t.id,t.clients.forEach(function(t){var e=new u(t.id,t.attributes,t.isHost);this.clients.push(e)},this),this.connectCallback&&(r.debug("channel.connect->callback",this.clients.me),this.connectCallback(null,this.clients.me),this.connectCallback=null),r.debug('channel.emit("connect")',this.clients.me),this.emit("connect",this.clients.me)},i.prototype._onDisconnect=function(){if(r.silly("channel._onDisconnect"),this.connected){var t=this.clients.me;this.clients.clear(),r.debug('channel.emit("disconnect")',t),this.emit("disconnect",t)}this.connected=!1},i.prototype._onClientConnect=function(t){r.silly("channel._onClientConnect");var e=new u(t.id,t.attributes,t.isHost);this.clients.push(e),r.debug('channel.emit("clientConnect")',e),this.emit("clientConnect",e)},i.prototype._onClientDisconnect=function(t){r.silly("channel._onClientDisconnect");var e=this.clients.getById(t.id);e?this.clients.remove(e):(r.warn("client "+t.id+" could not be found, so it was not removed from the client list"),e=new u(t.id,t.attributes,t.isHost)),r.debug('channel.emit("clientDisconnect")',e),this.emit("clientDisconnect",e)},i.prototype._onReady=function(){r.debug('channel.emit("ready")'),this.emit("ready")},i.prototype._onUserEvent=function(t){var e=this.clients.getById(t.from),n=t.event,i=t.data,s=t.payload;r.debug('channel.emit("'+n+'")',i,e,s),this.emit(n,i,e,s)},i.prototype._onSocketOpen=function(){r.silly("channel._onSocketOpen")},i.prototype._onSocketClose=function(){r.silly("channel._onSocketClose"),this._onDisconnect()},i.prototype._onSocketError=function(t){r.silly("channel._onSocketError",t),this.emit("error",new Error("WebSocket error"))},i.prototype._onSocketMessage=function(t){r.silly("channel._onSocketMessage",t);try{if("string"==typeof t.data)t=JSON.parse(t.data);else{var e=i.unpackMessage(t.data);t=e.message,t.payload=e.payload}}catch(n){return void r.warn("unable to parse message",t)}if(t.id&&(t.result||t.error)){if(!this.resultHandlers[t.id])return void r.warn("unable to find result handler for result message ",t);this.resultHandlers[t.id](t.error,t.result)}else if(t.event)switch(t.event){case"ms.channel.connect":this._onConnect(t.data);break;case"ms.channel.clientConnect":this._onClientConnect(t.data);break;case"ms.channel.clientDisconnect":this._onClientDisconnect(t.data);break;case"ms.channel.ready":this._onReady(t.data);break;default:this._onUserEvent(t)}else r.warn("unrecognized message type",t)},i.prototype.startHealthCheck=function(){if(this.stopHealthCheck(),this.pingTimeout>0){var t=null;this.on(h,function(e){t=Date.now(),r.debug("ping trip : ",t-e),r.debug("updated last ping time : ",t)});var e=function(){var e=Date.now();t||(t=e),e-t<this.pingTimeout?(r.debug("sending ping"),this.publish(h,e,this.clients.me.id)):(r.debug("ping timed, out closing connection"),this.stopHealthCheck(),this.connection&&(this.connection.close(),this._onDisconnect()))}.bind(this);this.pingInterval=setInterval(e,this.pingTimeout)}},i.prototype.stopHealthCheck=function(){clearInterval(this.pingInterval),this.removeAllListeners(h)},t.exports=i},function(t){"use strict";function e(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t),i.log.apply(i,e)}}for(var n=["error","warn","info","verbose","debug","silly"],i={level:"disabled",log:function(t){if("disabled"!==i.level&&n.indexOf(t)<=n.indexOf(i.level)){var e=Array.prototype.slice.call(arguments,1);e.unshift("[MSF:"+t.toUpperCase()+"]"),console[t]?console[t].apply(console,e):console.log.apply(console,e)}}},s=0;s<n.length;s++){var r=n[s];i[r]=e(r)}t.exports=i},function(t,e,n){"use strict";var i=n(13),s={isValid:function(t){var e=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;return t.match(e)?!0:!1},parse:function(t){var e={},n=document.createElement("a");return n.href=t,e.href=n.href,e.protocol=n.protocol,e.hostname=n.hostname,e.port=n.port,e.pathname=n.pathname,e.search=n.search,e.hash=n.hash,e.host=n.host,e.queryString=i.parse(n.search),e}};t.exports=s},function(t){"use strict";t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t){"use strict";function e(t,e,n,i){return{enumerable:t,configurable:e,writable:n,value:i}}t.exports={readOnly:function(t,n){Array.isArray(n)?n.forEach(function(n){Object.defineProperty(t,n,e(!0,!0,!1,t[n]))}):Object.defineProperty(t,n,e(!0,!0,!1,t[n]))},"private":function(t,n){Array.isArray(n)?n.forEach(function(n){Object.defineProperty(t,n,e(!1,!0,!0,t[n]))}):Object.defineProperty(t,n,e(!1,!0,!0,t[n]))}}},function(t){"use strict";t.exports={isString:function(t){return"string"==typeof t},isNull:function(t){return null===t},isBoolean:function(t){return"boolean"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return t===Object(t)},isArray:function(t){return t.constructor===Array},isFunction:function(t){return"function"==typeof t},isUndefined:function(t){return"undefined"==typeof t}}},function(t){"use strict";/*!
	 query-string
	 Parse and stringify URL query strings
	 https://github.com/sindresorhus/query-string
	 by Sindre Sorhus
	 MIT License
	 */
var e={};e.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#)/,""),t?t.trim().split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],s=n[1];return i=decodeURIComponent(i),s=void 0===s?null:decodeURIComponent(s),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(s):t[i]=[t[i],s]:t[i]=s,t},{}):{})},e.stringify=function(t){return t?Object.keys(t).map(function(e){var n=t[e];return Array.isArray(n)?n.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(n)}).join("&"):""},t.exports=e},function(t,e,n){"use strict";function i(t,e,n,i){if(!r.isString(t))throw new TypeError("id must be a valid string");if(e&&!r.isObject(e))throw new TypeError("attributes must be a valid object");this.id=t,this.attributes=e||{},this.isHost=n,this.connectTime=i||Date.now(),Object.freeze(this.attributes),Object.freeze(this)}var s=n(5),r=s.types;t.exports=i},function(t,e,n){"use strict";function i(t){if(!r.isObject(t))throw new TypeError("channel must be of type Channel");this.channel=t,i.super_.call(this)}var s=n(5),r=s.types;s.inherits(i,Array),Object.defineProperty(i.prototype,"me",{get:function(){return this.getById(this.channel.clientId)}}),i.prototype.clear=function(){this.length=0},i.prototype.remove=function(t){var e=this.indexOf(t);return-1!==e?(this.splice(e,1),t):null},i.prototype.getById=function(t){if(!r.isString(t)&&!r.isNumber(t))throw new TypeError("id must be a valid string or number");for(var e=0;e<this.length;e++)if(this[e].id===t)return this[e];return null},t.exports=i}]);
//# sourceMappingURL=msf-2.0.21.min.js.map